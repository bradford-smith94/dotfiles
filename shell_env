# Bradford Smith
# .shell_env
# updated: 02/22/2017
#####################

# turn off flow control (ctrl-q and ctrl-s)
stty -ixon
stty -ixoff

# source aliases
if [ -f "$HOME/.shell_aliases" ]; then
    . ~/.shell_aliases
fi

# make less more friendly for non-text input files, see lesspipe(1)
[ -x /usr/bin/lesspipe ] && eval "$(SHELL=/bin/sh lesspipe)"

# use dircolors to set $LC_COLORS
if [ -f /usr/bin/dircolors ]; then
    [ -e "$HOME/.dir_colors" ] && DIR_COLORS="$HOME/.dir_colors"
    [ -e "$DIR_COLORS" ] || DIR_COLORS=""
    eval "`dircolors -b $DIR_COLORS`"
fi

# if ~/bin exists add it to the beginning of the path
if [ -d ~/bin ]; then
    PATH=~/bin:$PATH
fi

# if android tools exist add them to the path
if [ -d /opt/android-sdk/tools/ ]; then
    PATH=$PATH:/opt/android-sdk/tools/
fi
export PATH=$PATH

# use vim as the default editor and man pager
if [ -f /usr/bin/vim ]; then
    export EDITOR=/usr/bin/vim
    export MANPAGER="/bin/sh -c \"col -b | vim -c 'set ft=man' -\""
fi

# start ssh-agent
# https://wiki.archlinux.org/index.php?title=SSH_keys&redirect=no#SSH_agents
if ! pgrep -u "$USER" ssh-agent > /dev/null; then
    ssh-agent > ~/.ssh-agent-output
fi
if [[ "$SSH_AGENT_PID" == "" ]]; then
    eval "$(<~/.ssh-agent-output)"
fi

# if not in SSH
if [ "x${SSH_TTY}" = "x" ]; then
#   and screenfetch is installed
    if [ -f /usr/bin/screenfetch ]; then
        screenfetch
    fi
fi
