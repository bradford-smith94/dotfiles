# Bradford Smith
# ~/.gitconfig
# updated: 07/03/2017
#####################

[user]
    name = Bradford Smith
    #make git prompt for email before allowing commits
    useConfigOnly = true
[core]
    editor = vim
    excludesfile = ~/.gitignore
[merge]
    tool = vimdiff
[diff]
    tool = vimdiff
[difftool]
    prompt = false
[commit] #commits start with prefilled text provided in:
    template = ~/.gitmessage
[color]
    ui = auto
    branch = true
    diff = true
    interactive = true
    status = true
[color "status"]
    added = green
    changed = yellow
    untracked = red
[push]
    default = upstream
[log]
    decorate = short
[alias]
    #show aliases
    alias = "!git config --get-regexp 'alias.*' | colrm 1 6 | sed -e 's/[ ]/ = /' -e 's/[ ]\\+/ /g' | fmt -t"
    aliases = "!git alias"

    authors = "shortlog -ns --no-merges"
    branches = "branch -avv"
    contributions ="!git summary"

    #from github.com/tsu-complete/dot/blob/master/git/_gitconfig
    graph = "log --graph --all --pretty='%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit --date=relative"
    lines = "!git grep --cached -Il '' | xargs wc -l"
    lines-authored = "!git grep --cached -Il '' | xargs -n1 git blame --line-porcelain HEAD | grep \"^author \"|sort|uniq -c|sort -nr"

    #make a .mailmap file based on the shortlog
    mkmailmap = "!git shortlog -se | awk -F'\\t' '{print $2,$3,$2,$3}' | sort > .mailmap"

    #use after git pull
    new = "!git log $1@{1}..$1@{0} \"$@\""
    newest = "log -1"

    remotes = "remote -v"
    stash-unstaged = "stash -k"
    stashes = "stash list"
    tags = "tag"
    today ="log --since=midnight"
    top = "rev-parse --show-toplevel"

    unpushed = "log @{u}.."
    untrack = "rm --cached"

    #for inspecting specific commits
    whatis = "show -s"

    #print git config user settings
    whoami = "!git config --get-regexp 'user.*' | colrm 1 5 | sed -e '/^useconfigonly.*$/d' -e 's/[ ]/ = /'"

    #given a string for an author, try to figure out full name and email
    whois = "!sh -c 'git log -i -1 --pretty=\"format:%an <%ae>\" --author=\"$1\"' -"

    yesterday = "log --since=\"yesterday midnight\" --until=midnight"
